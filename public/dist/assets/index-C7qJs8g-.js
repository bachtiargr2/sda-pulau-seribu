import{c as ne,r as ie,d as qe,j as t,b as Fe,u as Qe,H as Xe}from"./app-Bb5Jy5Wi.js";import{c as Ze,S as Ne,a as Le,b as Te,d as we,e as Pe,L as Ae,f as $e,E as et,P as tt,D as st}from"./app-table-D6KC4Pz_.js";import{C as Ee}from"./checkbox-GdbGZxk-.js";import{c as at,B as C}from"./app-logo-icon-zjAQY0SR.js";import{S as lt,a as it,b as nt,c as ot,d as rt,e as ct,f as dt,t as De,D as ut,g as mt,h as ht,i as ft,j as pt,k as Ie,A as xt,m as jt}from"./app-layout-D-dmCw8I.js";import{I as gt}from"./input-CtiRsyvy.js";import{L as re}from"./label-CdTcKUC_.js";import{D as Re,a as Me,b as ze,c as Ue,d as He,e as Ye,f as Ve,g as Je}from"./dialog-Bxewd3xD.js";import{I as ce}from"./input-error-CS0omWpi.js";import{u as _t,Y as bt,D as St}from"./download-dialog-CQ-YVqGr.js";import{T as Dt}from"./trash-DeyISsXL.js";import{S as kt}from"./status-column-CUl-31d0.js";/* empty css            */import"./heading-small-CgOi6Snu.js";import"./index-Bk5fKNgg.js";import"./index-CTAdxxA7.js";import"./index-C5MympBQ.js";import"./check-qxtGonGv.js";import"./index-Bi1bFxLT.js";import"./loader-circle-DOrIrtt6.js";import"./badge-C7EfGUZH.js";function Ke(s){const e=ne.c(116),{pulauOptions:i,jenisDataOptions:n,statusOptions:a,initialData:l,onSuccess:r,submitRoute:c,method:m}=s,u=m===void 0?"post":m,[d,j]=ie.useTransition(),_=l?.id_pulau??"",g=l?.id_jenis_data??"",p=l?.tahun??"",x=l?.dokumen_nama??"",f=l?.dokumen_path??"",D=l?.dokumen_url??"",y=l?.status??"";let k;e[0]!==_||e[1]!==g||e[2]!==p||e[3]!==x||e[4]!==f||e[5]!==D||e[6]!==y?(k={id_pulau:_,id_jenis_data:g,tahun:p,dokumen_nama:x,dokumen_path:f,dokumen_url:D,dokumen:void 0,status:y,_method:"PUT"},e[0]=_,e[1]=g,e[2]=p,e[3]=x,e[4]=f,e[5]=D,e[6]=y,e[7]=k):k=e[7];const{data:o,setData:v,errors:h,reset:ke,setError:ye}=qe(k);let de;e[8]!==h||e[9]!==v||e[10]!==ye?(de=(S,oe)=>{v(S,oe),h[S]&&ye(S,"")},e[8]=h,e[9]=v,e[10]=ye,e[11]=de):de=e[11];const b=de;let ue;e[12]!==o||e[13]!==l||e[14]!==u||e[15]!==r||e[16]!==ke||e[17]!==c?(ue=S=>{S.preventDefault(),j(()=>{const oe=new FormData;Object.entries(o).forEach(Ge=>{const[We,Oe]=Ge;Oe!=null&&oe.append(We,Oe)}),u==="put"&&l?.id?_t({url:c,id:l.id,data:oe,label:"Data Limbah",onSuccess:r}):Ze({url:"/kelola-data/limbah",data:oe,label:"Data Limbah",onSuccess:()=>{ke(),r?.()}})})},e[12]=o,e[13]=l,e[14]=u,e[15]=r,e[16]=ke,e[17]=c,e[18]=ue):ue=e[18];const Ce=ue,ve=u==="put"&&"px-4";let O;e[19]!==ve?(O=at("flex flex-col gap-4",ve),e[19]=ve,e[20]=O):O=e[20];let me;e[21]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(re,{children:"Nama Pulau"}),e[21]=me):me=e[21];let N;e[22]!==o.id_pulau?(N=o.id_pulau?.toString()??"",e[22]=o.id_pulau,e[23]=N):N=e[23];let L;e[24]!==b?(L=S=>b("id_pulau",Number(S)),e[24]=b,e[25]=L):L=e[25];let he;e[26]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Ne,{children:t.jsx(Le,{placeholder:"-- Pilih pulau --"})}),e[26]=he):he=e[26];let T;e[27]!==i?(T=i.map(vt),e[27]=i,e[28]=T):T=e[28];let w;e[29]!==T?(w=t.jsx(Te,{children:t.jsx(we,{children:T})}),e[29]=T,e[30]=w):w=e[30];let P;e[31]!==N||e[32]!==L||e[33]!==w?(P=t.jsxs(Pe,{value:N,onValueChange:L,children:[he,w]}),e[31]=N,e[32]=L,e[33]=w,e[34]=P):P=e[34];let A;e[35]!==h.id_pulau?(A=h.id_pulau&&t.jsx(ce,{message:h.id_pulau}),e[35]=h.id_pulau,e[36]=A):A=e[36];let $;e[37]!==P||e[38]!==A?($=t.jsxs("div",{children:[me,P,A]}),e[37]=P,e[38]=A,e[39]=$):$=e[39];let fe;e[40]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(re,{children:"Jenis Data"}),e[40]=fe):fe=e[40];let F;e[41]!==o.id_jenis_data?(F=o.id_jenis_data?.toString()??"",e[41]=o.id_jenis_data,e[42]=F):F=e[42];let E;e[43]!==b?(E=S=>b("id_jenis_data",Number(S)),e[43]=b,e[44]=E):E=e[44];let pe;e[45]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Ne,{children:t.jsx(Le,{placeholder:"-- Pilih jenis data --"})}),e[45]=pe):pe=e[45];let I;e[46]!==n?(I=n.map(Ct),e[46]=n,e[47]=I):I=e[47];let R;e[48]!==I?(R=t.jsx(Te,{children:t.jsx(we,{children:I})}),e[48]=I,e[49]=R):R=e[49];let M;e[50]!==F||e[51]!==E||e[52]!==R?(M=t.jsxs(Pe,{value:F,onValueChange:E,children:[pe,R]}),e[50]=F,e[51]=E,e[52]=R,e[53]=M):M=e[53];let z;e[54]!==h.id_jenis_data?(z=h.id_jenis_data&&t.jsx(ce,{message:h.id_jenis_data}),e[54]=h.id_jenis_data,e[55]=z):z=e[55];let U;e[56]!==M||e[57]!==z?(U=t.jsxs("div",{children:[fe,M,z]}),e[56]=M,e[57]=z,e[58]=U):U=e[58];let xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(re,{children:"Tahun"}),e[59]=xe):xe=e[59];const Be=o.tahun;let H;e[60]!==b?(H=S=>b("tahun",S),e[60]=b,e[61]=H):H=e[61];let je;e[62]===Symbol.for("react.memo_cache_sentinel")?(je=new Date().getFullYear(),e[62]=je):je=e[62];let Y;e[63]!==o.tahun||e[64]!==H?(Y=t.jsx(bt,{value:Be,onChange:H,placeholder:"Pilih tahun",minYear:1950,maxYear:je}),e[63]=o.tahun,e[64]=H,e[65]=Y):Y=e[65];let V;e[66]!==h.tahun?(V=h.tahun&&t.jsx(ce,{message:h.tahun}),e[66]=h.tahun,e[67]=V):V=e[67];let J;e[68]!==Y||e[69]!==V?(J=t.jsxs("div",{children:[xe,Y,V]}),e[68]=Y,e[69]=V,e[70]=J):J=e[70];let ge;e[71]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(re,{children:"Upload Dokumen"}),e[71]=ge):ge=e[71];let K;e[72]!==b?(K=t.jsx(gt,{type:"file",onChange:S=>b("dokumen",S.target.files?.[0])}),e[72]=b,e[73]=K):K=e[73];let B;e[74]!==h.dokumen?(B=h.dokumen&&t.jsx(ce,{message:h.dokumen}),e[74]=h.dokumen,e[75]=B):B=e[75];let G;e[76]!==o.dokumen_nama||e[77]!==o.dokumen_url?(G=o.dokumen_url?t.jsxs("div",{className:"text-sm text-gray-600",children:["Current file:"," ",t.jsx("a",{href:o.dokumen_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:o.dokumen_nama.split("/").pop()})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No file uploaded yet"}),e[76]=o.dokumen_nama,e[77]=o.dokumen_url,e[78]=G):G=e[78];let W;e[79]!==K||e[80]!==B||e[81]!==G?(W=t.jsxs("div",{children:[ge,K,B,G]}),e[79]=K,e[80]=B,e[81]=G,e[82]=W):W=e[82];let _e;e[83]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(re,{children:"Status"}),e[83]=_e):_e=e[83];let q;e[84]!==o.status?(q=o.status?.toString()??"",e[84]=o.status,e[85]=q):q=e[85];let Q;e[86]!==b?(Q=S=>b("status",Number(S)),e[86]=b,e[87]=Q):Q=e[87];let be;e[88]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(Ne,{children:t.jsx(Le,{placeholder:"-- Pilih status --"})}),e[88]=be):be=e[88];let X;e[89]!==a?(X=a.map(yt),e[89]=a,e[90]=X):X=e[90];let Z;e[91]!==X?(Z=t.jsx(Te,{children:t.jsx(we,{children:X})}),e[91]=X,e[92]=Z):Z=e[92];let ee;e[93]!==q||e[94]!==Q||e[95]!==Z?(ee=t.jsxs(Pe,{value:q,onValueChange:Q,children:[be,Z]}),e[93]=q,e[94]=Q,e[95]=Z,e[96]=ee):ee=e[96];let te;e[97]!==h.status?(te=h.status&&t.jsx(ce,{message:h.status}),e[97]=h.status,e[98]=te):te=e[98];let se;e[99]!==ee||e[100]!==te?(se=t.jsxs("div",{children:[_e,ee,te]}),e[99]=ee,e[100]=te,e[101]=se):se=e[101];let ae;e[102]!==O||e[103]!==$||e[104]!==U||e[105]!==J||e[106]!==W||e[107]!==se?(ae=t.jsxs("div",{className:O,children:[$,U,J,W,se]}),e[102]=O,e[103]=$,e[104]=U,e[105]=J,e[106]=W,e[107]=se,e[108]=ae):ae=e[108];let le;e[109]!==d||e[110]!==u?(le=u==="post"?t.jsxs(Re,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(Me,{asChild:!0,children:t.jsx(C,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(C,{disabled:d,children:[d&&t.jsx(Ae,{className:"mr-1.5 size-4 animate-spin"}),"Create"]})]}):t.jsxs(lt,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(it,{asChild:!0,children:t.jsx(C,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(C,{disabled:d,children:[d&&t.jsx(Ae,{className:"mr-1.5 size-4 animate-spin"}),"Save"]})]}),e[109]=d,e[110]=u,e[111]=le):le=e[111];let Se;return e[112]!==Ce||e[113]!==ae||e[114]!==le?(Se=t.jsxs("form",{onSubmit:Ce,className:"flex flex-col gap-4",children:[ae,le]}),e[112]=Ce,e[113]=ae,e[114]=le,e[115]=Se):Se=e[115],Se}function yt(s){return t.jsx($e,{value:s.id.toString(),children:s.nama},s.id)}function Ct(s){return t.jsx($e,{value:s.id.toString(),children:s.nama},s.id)}function vt(s){return t.jsx($e,{value:s.id.toString(),children:s.nama},s.id)}function Ot(s){const e=ne.c(24);let i,n,a,l,r;e[0]!==s?({data:i,pulauOptions:a,jenisDataOptions:l,statusOptions:r,...n}=s,e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=r):(i=e[1],n=e[2],a=e[3],l=e[4],r=e[5]);let c;e[6]!==a?(c=a===void 0?[]:a,e[6]=a,e[7]=c):c=e[7];const m=c;let u;e[8]!==l?(u=l===void 0?[]:l,e[8]=l,e[9]=u):u=e[9];const d=u;let j;e[10]!==r?(j=r===void 0?[]:r,e[10]=r,e[11]=j):j=e[11];const _=j;let g;e[12]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs(ot,{className:"text-left",children:[t.jsx(rt,{children:"Update Data Limbah"}),t.jsx(ct,{children:"Perbarui data jenis data dan simpan perubahan."})]}),e[12]=g):g=e[12];let p;e[13]!==n?(p=()=>n.onOpenChange?.(!1),e[13]=n,e[14]=p):p=e[14];let x;e[15]!==i||e[16]!==d||e[17]!==m||e[18]!==_||e[19]!==p?(x=t.jsxs(dt,{className:"flex flex-col gap-6 sm:max-w-md",children:[g,t.jsx(Ke,{initialData:i,pulauOptions:m,jenisDataOptions:d,statusOptions:_,method:"put",submitRoute:"/kelola-data/limbah",onSuccess:p})]}),e[15]=i,e[16]=d,e[17]=m,e[18]=_,e[19]=p,e[20]=x):x=e[20];let f;return e[21]!==n||e[22]!==x?(f=t.jsx(nt,{...n,children:x}),e[21]=n,e[22]=x,e[23]=f):f=e[23],f}function Nt(s){const e=ne.c(32);let i,n,a,l,r,c;e[0]!==s?({data:i,url:c,label:l,onSuccess:n,showTrigger:r,...a}=s,e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=r,e[6]=c):(i=e[1],n=e[2],a=e[3],l=e[4],r=e[5],c=e[6]);const m=l===void 0?"item":l,u=r===void 0?!0:r,[d,j]=ie.useTransition();ie.useState(!1);let _;e[7]!==i||e[8]!==m||e[9]!==n||e[10]!==a||e[11]!==c?(_=()=>{j(()=>{Array.isArray(i)?Fe.delete(c,{data:{ids:i},onSuccess:()=>{De.success(`${i.length} ${m??"item"} deleted successfully`),a.onOpenChange?.(!1),n?.()},onError:Tt}):Fe.delete(`${c}/${i}`,{onSuccess:()=>{De.success(`${m??"Item"} deleted successfully`),a.onOpenChange?.(!1),n?.()},onError:Lt})})},e[7]=i,e[8]=m,e[9]=n,e[10]=a,e[11]=c,e[12]=_):_=e[12];const g=_;let p;e[13]!==u?(p=u&&t.jsx(Ue,{asChild:!0,children:t.jsxs(C,{variant:"outline",size:"sm",children:[t.jsx(Dt,{className:"mr-2 size-4","aria-hidden":"true"}),"Delete"]})}),e[13]=u,e[14]=p):p=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(He,{children:"Are you absolutely sure?"}),e[15]=x):x=e[15];let f;e[16]!==m?(f=t.jsxs(Ye,{children:[x,t.jsxs(Ve,{children:["This action cannot be undone. This will permanently delete"," ",t.jsx("span",{className:"font-medium",children:m})," from our servers."]})]}),e[16]=m,e[17]=f):f=e[17];let D;e[18]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(Me,{asChild:!0,children:t.jsx(C,{variant:"outline",children:"Cancel"})}),e[18]=D):D=e[18];let y;e[19]!==d?(y=d&&t.jsx(Ae,{className:"mr-1.5 size-4 animate-spin","aria-hidden":"true"}),e[19]=d,e[20]=y):y=e[20];let k;e[21]!==g||e[22]!==d||e[23]!==y?(k=t.jsxs(Re,{className:"gap-2 sm:space-x-0",children:[D,t.jsxs(C,{variant:"destructive",onClick:g,disabled:d,children:[y,"Delete"]})]}),e[21]=g,e[22]=d,e[23]=y,e[24]=k):k=e[24];let o;e[25]!==f||e[26]!==k?(o=t.jsxs(Je,{children:[f,k]}),e[25]=f,e[26]=k,e[27]=o):o=e[27];let v;return e[28]!==a||e[29]!==o||e[30]!==p?(v=t.jsxs(ze,{...a,children:[p,o]}),e[28]=a,e[29]=o,e[30]=p,e[31]=v):v=e[31],v}function Lt(){return De.error("Failed to delete")}function Tt(){return De.error("Failed to delete")}const wt=(s,e,i)=>[{id:"select",header:({table:a})=>t.jsx(Ee,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:a})=>t.jsx(Ee,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorFn:a=>a.pulau?.nama??"-",header:"Pulau"},{accessorFn:a=>a.jenis_data?.nama??"-",header:"Jenis Data"},{accessorKey:"tahun",header:"Tahun"},{accessorKey:"dokumen_nama",header:"Nama Dokumen",cell:({row:a})=>t.jsx(St,{nama:a.original?.dokumen_nama,path:a.original?.dokumen_path})},{accessorKey:"status",header:"Status",cell:({row:a})=>t.jsx(kt,{status:a.original?.status})},{id:"actions",cell:({row:a})=>{const[l,r]=ie.useState(!1),[c,m]=ie.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Ot,{open:l,onOpenChange:r,pulauOptions:s,jenisDataOptions:e,statusOptions:i,data:a.original}),t.jsx(Nt,{open:c,onOpenChange:m,data:a.original.id,url:"/data-limbah",label:a.original.dokumen_nama||"Data Limbah",onSuccess:()=>a.toggleSelected(!1),showTrigger:!1}),t.jsxs(ut,{children:[t.jsx(mt,{asChild:!0,children:t.jsxs(C,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"Open Menu"}),t.jsx(et,{className:"h-4 w-4"})]})}),t.jsxs(ht,{align:"end",children:[t.jsx(ft,{children:"Actions"}),t.jsx(pt,{}),t.jsx(Ie,{onClick:()=>{r(!0)},children:"Edit"}),t.jsx(Ie,{children:"Delete"})]})]})]})}}];function Pt(s){const e=ne.c(10),{pulauOptions:i,jenisDataOptions:n,statusOptions:a}=s,[l,r]=ie.useState(!1);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(Ue,{asChild:!0,children:t.jsxs(C,{variant:"outline",size:"sm",children:[t.jsx(tt,{className:"mr-2 h-4 w-4"})," Add Data Limbah"]})}),e[0]=c):c=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(Ye,{children:[t.jsx(He,{children:"Create Data Limbah"}),t.jsx(Ve,{children:"Lengkapi data berikut untuk menambahkan data anggaran limbah baru."})]}),e[1]=m):m=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=()=>r(!1),e[2]=u):u=e[2];let d;e[3]!==n||e[4]!==i||e[5]!==a?(d=t.jsxs(Je,{children:[m,t.jsx(Ke,{pulauOptions:i,jenisDataOptions:n,statusOptions:a,submitRoute:"/data-limbah",onSuccess:u})]}),e[3]=n,e[4]=i,e[5]=a,e[6]=d):d=e[6];let j;return e[7]!==l||e[8]!==d?(j=t.jsxs(ze,{open:l,onOpenChange:r,children:[c,d]}),e[7]=l,e[8]=d,e[9]=j):j=e[9],j}function At(s){const e=ne.c(4),{pulauOptions:i,jenisDataOptions:n,statusOptions:a}=s;let l;return e[0]!==n||e[1]!==i||e[2]!==a?(l=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Pt,{pulauOptions:i,jenisDataOptions:n,statusOptions:a})}),e[0]=n,e[1]=i,e[2]=a,e[3]=l):l=e[3],l}const $t=[{title:"Data Limbah",href:jt.index().url}];function ss(){const s=ne.c(21),{data_limbah:e,pulauOptions:i,jenisDataOptions:n,statusOptions:a}=Qe().props;let l;s[0]!==e?(l=Array.isArray(e)?e:[],s[0]=e,s[1]=l):l=s[1];const r=l;let c;s[2]!==i?(c=Array.isArray(i)?i:[],s[2]=i,s[3]=c):c=s[3];const m=c;let u;s[4]!==n?(u=Array.isArray(n)?n:[],s[4]=n,s[5]=u):u=s[5];const d=u;let j;s[6]!==a?(j=Array.isArray(a)?a:[],s[6]=a,s[7]=j):j=s[7];const _=j;let g;s[8]!==n||s[9]!==i||s[10]!==a?(g=wt(i,n,a),s[8]=n,s[9]=i,s[10]=a,s[11]=g):g=s[11];const p=g;let x;s[12]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(Xe,{title:"Data Limbah"}),s[12]=x):x=s[12];let f;s[13]!==d||s[14]!==m||s[15]!==_?(f=t.jsx(At,{pulauOptions:m,jenisDataOptions:d,statusOptions:_}),s[13]=d,s[14]=m,s[15]=_,s[16]=f):f=s[16];let D;return s[17]!==r||s[18]!==f||s[19]!==p?(D=t.jsxs(xt,{breadcrumbs:$t,children:[x,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsx(st,{title:"Data Limbah",desc:"Data anggaran khusus kategori Limbah",columns:p,data:r,toolbar:f})})]}),s[17]=r,s[18]=f,s[19]=p,s[20]=D):D=s[20],D}export{ss as default};
