import{c as ne,r as ie,d as Ue,j as t,u as He,H as Ve}from"./app-hjCDtS7f.js";import{c as Ye,S as ve,a as Ae,b as we,d as Ne,e as Pe,L as Ee,f as Fe,E as $e,P as ze,D as Je}from"./app-table-DEMotU8U.js";import{C as Ie}from"./checkbox-BSapzMVW.js";import{c as Ke,B as te}from"./app-logo-icon-C15fRdAq.js";import{S as Ge,a as We,b as qe,c as Qe,d as Xe,e as Ze,f as et,D as tt,g as at,h as st,i as lt,j as it,k as Te,A as nt,l as ot}from"./app-layout-C4mYFOCx.js";import{I as rt}from"./input-Bpnb-2SH.js";import{L as se}from"./label-BndpfJXe.js";import{D as ct,a as dt,b as ut,c as mt,d as ht,e as pt,f as ft,g as xt}from"./dialog-C2kMVbHS.js";import{I as le}from"./input-error-B5BGTriX.js";import{u as jt,Y as gt,D as _t,a as Dt}from"./download-dialog-CjVqrE3A.js";import{S as St}from"./status-column-DhUrWlJJ.js";/* empty css            */import"./heading-small-C6H8P8AR.js";import"./index-B4CkvkQe.js";import"./index-ESxt-22C.js";import"./index-6Bmbv0Jk.js";import"./check-DwTt7AEl.js";import"./index-Bi1bFxLT.js";import"./loader-circle-B77yPPCx.js";import"./trash-CHgpwb7F.js";import"./badge-CgjGEe-3.js";function Be(a){const e=ne.c(116),{pulauOptions:n,jenisDataOptions:i,statusOptions:s,initialData:l,onSuccess:d,submitRoute:m,method:h}=a,o=h===void 0?"post":h,[r,p]=ie.useTransition(),S=l?.id_pulau??"",D=l?.id_jenis_data??"",_=l?.tahun??"",f=l?.dokumen_nama??"",x=l?.dokumen_path??"",b=l?.dokumen_url??"",De=l?.status??"";let oe;e[0]!==S||e[1]!==D||e[2]!==_||e[3]!==f||e[4]!==x||e[5]!==b||e[6]!==De?(oe={id_pulau:S,id_jenis_data:D,tahun:_,dokumen_nama:f,dokumen_path:x,dokumen_url:b,dokumen:void 0,status:De,_method:"PUT"},e[0]=S,e[1]=D,e[2]=_,e[3]=f,e[4]=x,e[5]=b,e[6]=De,e[7]=oe):oe=e[7];const{data:u,setData:Se,errors:c,reset:be,setError:ke}=Ue(oe);let re;e[8]!==c||e[9]!==Se||e[10]!==ke?(re=(g,ae)=>{Se(g,ae),c[g]&&ke(g,"")},e[8]=c,e[9]=Se,e[10]=ke,e[11]=re):re=e[11];const j=re;let ce;e[12]!==u||e[13]!==l||e[14]!==o||e[15]!==d||e[16]!==be||e[17]!==m?(ce=g=>{g.preventDefault(),p(()=>{const ae=new FormData;Object.entries(u).forEach(Le=>{const[Me,Oe]=Le;Oe!=null&&ae.append(Me,Oe)}),o==="put"&&l?.id?jt({url:m,id:l.id,data:ae,label:"Data Air",onSuccess:d}):Ye({url:"/kelola-data/air",data:ae,label:"Data Air",onSuccess:()=>{be(),d?.()}})})},e[12]=u,e[13]=l,e[14]=o,e[15]=d,e[16]=be,e[17]=m,e[18]=ce):ce=e[18];const Ce=ce,ye=o==="put"&&"px-4";let k;e[19]!==ye?(k=Ke("flex flex-col gap-4",ye),e[19]=ye,e[20]=k):k=e[20];let de;e[21]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(se,{children:"Nama Pulau"}),e[21]=de):de=e[21];let C;e[22]!==u.id_pulau?(C=u.id_pulau?.toString()??"",e[22]=u.id_pulau,e[23]=C):C=e[23];let y;e[24]!==j?(y=g=>j("id_pulau",Number(g)),e[24]=j,e[25]=y):y=e[25];let ue;e[26]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(ve,{children:t.jsx(Ae,{placeholder:"-- Pilih pulau --"})}),e[26]=ue):ue=e[26];let O;e[27]!==n?(O=n.map(Ct),e[27]=n,e[28]=O):O=e[28];let v;e[29]!==O?(v=t.jsx(we,{children:t.jsx(Ne,{children:O})}),e[29]=O,e[30]=v):v=e[30];let A;e[31]!==C||e[32]!==y||e[33]!==v?(A=t.jsxs(Pe,{value:C,onValueChange:y,children:[ue,v]}),e[31]=C,e[32]=y,e[33]=v,e[34]=A):A=e[34];let w;e[35]!==c.id_pulau?(w=c.id_pulau&&t.jsx(le,{message:c.id_pulau}),e[35]=c.id_pulau,e[36]=w):w=e[36];let N;e[37]!==A||e[38]!==w?(N=t.jsxs("div",{children:[de,A,w]}),e[37]=A,e[38]=w,e[39]=N):N=e[39];let me;e[40]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(se,{children:"Jenis Data"}),e[40]=me):me=e[40];let P;e[41]!==u.id_jenis_data?(P=u.id_jenis_data?.toString()??"",e[41]=u.id_jenis_data,e[42]=P):P=e[42];let T;e[43]!==j?(T=g=>j("id_jenis_data",Number(g)),e[43]=j,e[44]=T):T=e[44];let he;e[45]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ve,{children:t.jsx(Ae,{placeholder:"-- Pilih jenis data --"})}),e[45]=he):he=e[45];let F;e[46]!==i?(F=i.map(kt),e[46]=i,e[47]=F):F=e[47];let E;e[48]!==F?(E=t.jsx(we,{children:t.jsx(Ne,{children:F})}),e[48]=F,e[49]=E):E=e[49];let I;e[50]!==P||e[51]!==T||e[52]!==E?(I=t.jsxs(Pe,{value:P,onValueChange:T,children:[he,E]}),e[50]=P,e[51]=T,e[52]=E,e[53]=I):I=e[53];let B;e[54]!==c.id_jenis_data?(B=c.id_jenis_data&&t.jsx(le,{message:c.id_jenis_data}),e[54]=c.id_jenis_data,e[55]=B):B=e[55];let R;e[56]!==I||e[57]!==B?(R=t.jsxs("div",{children:[me,I,B]}),e[56]=I,e[57]=B,e[58]=R):R=e[58];let pe;e[59]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(se,{children:"Tahun"}),e[59]=pe):pe=e[59];const Re=u.tahun;let L;e[60]!==j?(L=g=>j("tahun",g),e[60]=j,e[61]=L):L=e[61];let fe;e[62]===Symbol.for("react.memo_cache_sentinel")?(fe=new Date().getFullYear(),e[62]=fe):fe=e[62];let M;e[63]!==u.tahun||e[64]!==L?(M=t.jsx(gt,{value:Re,onChange:L,placeholder:"Pilih tahun",minYear:1950,maxYear:fe}),e[63]=u.tahun,e[64]=L,e[65]=M):M=e[65];let U;e[66]!==c.tahun?(U=c.tahun&&t.jsx(le,{message:c.tahun}),e[66]=c.tahun,e[67]=U):U=e[67];let H;e[68]!==M||e[69]!==U?(H=t.jsxs("div",{children:[pe,M,U]}),e[68]=M,e[69]=U,e[70]=H):H=e[70];let xe;e[71]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(se,{children:"Upload Dokumen"}),e[71]=xe):xe=e[71];let V;e[72]!==j?(V=t.jsx(rt,{type:"file",onChange:g=>j("dokumen",g.target.files?.[0])}),e[72]=j,e[73]=V):V=e[73];let Y;e[74]!==c.dokumen?(Y=c.dokumen&&t.jsx(le,{message:c.dokumen}),e[74]=c.dokumen,e[75]=Y):Y=e[75];let $;e[76]!==u.dokumen_nama||e[77]!==u.dokumen_url?($=u.dokumen_url?t.jsxs("div",{className:"text-sm text-gray-600",children:["Current file:"," ",t.jsx("a",{href:u.dokumen_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:u.dokumen_nama.split("/").pop()})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No file uploaded yet"}),e[76]=u.dokumen_nama,e[77]=u.dokumen_url,e[78]=$):$=e[78];let z;e[79]!==V||e[80]!==Y||e[81]!==$?(z=t.jsxs("div",{children:[xe,V,Y,$]}),e[79]=V,e[80]=Y,e[81]=$,e[82]=z):z=e[82];let je;e[83]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(se,{children:"Status"}),e[83]=je):je=e[83];let J;e[84]!==u.status?(J=u.status?.toString()??"",e[84]=u.status,e[85]=J):J=e[85];let K;e[86]!==j?(K=g=>j("status",Number(g)),e[86]=j,e[87]=K):K=e[87];let ge;e[88]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(ve,{children:t.jsx(Ae,{placeholder:"-- Pilih status --"})}),e[88]=ge):ge=e[88];let G;e[89]!==s?(G=s.map(bt),e[89]=s,e[90]=G):G=e[90];let W;e[91]!==G?(W=t.jsx(we,{children:t.jsx(Ne,{children:G})}),e[91]=G,e[92]=W):W=e[92];let q;e[93]!==J||e[94]!==K||e[95]!==W?(q=t.jsxs(Pe,{value:J,onValueChange:K,children:[ge,W]}),e[93]=J,e[94]=K,e[95]=W,e[96]=q):q=e[96];let Q;e[97]!==c.status?(Q=c.status&&t.jsx(le,{message:c.status}),e[97]=c.status,e[98]=Q):Q=e[98];let X;e[99]!==q||e[100]!==Q?(X=t.jsxs("div",{children:[je,q,Q]}),e[99]=q,e[100]=Q,e[101]=X):X=e[101];let Z;e[102]!==k||e[103]!==N||e[104]!==R||e[105]!==H||e[106]!==z||e[107]!==X?(Z=t.jsxs("div",{className:k,children:[N,R,H,z,X]}),e[102]=k,e[103]=N,e[104]=R,e[105]=H,e[106]=z,e[107]=X,e[108]=Z):Z=e[108];let ee;e[109]!==r||e[110]!==o?(ee=o==="post"?t.jsxs(ct,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(dt,{asChild:!0,children:t.jsx(te,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(te,{disabled:r,children:[r&&t.jsx(Ee,{className:"mr-1.5 size-4 animate-spin"}),"Create"]})]}):t.jsxs(Ge,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(We,{asChild:!0,children:t.jsx(te,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(te,{disabled:r,children:[r&&t.jsx(Ee,{className:"mr-1.5 size-4 animate-spin"}),"Save"]})]}),e[109]=r,e[110]=o,e[111]=ee):ee=e[111];let _e;return e[112]!==Ce||e[113]!==Z||e[114]!==ee?(_e=t.jsxs("form",{onSubmit:Ce,className:"flex flex-col gap-4",children:[Z,ee]}),e[112]=Ce,e[113]=Z,e[114]=ee,e[115]=_e):_e=e[115],_e}function bt(a){return t.jsx(Fe,{value:a.id.toString(),children:a.nama},a.id)}function kt(a){return t.jsx(Fe,{value:a.id.toString(),children:a.nama},a.id)}function Ct(a){return t.jsx(Fe,{value:a.id.toString(),children:a.nama},a.id)}function yt(a){const e=ne.c(24);let n,i,s,l,d;e[0]!==a?({data:n,pulauOptions:s,jenisDataOptions:l,statusOptions:d,...i}=a,e[0]=a,e[1]=n,e[2]=i,e[3]=s,e[4]=l,e[5]=d):(n=e[1],i=e[2],s=e[3],l=e[4],d=e[5]);let m;e[6]!==s?(m=s===void 0?[]:s,e[6]=s,e[7]=m):m=e[7];const h=m;let o;e[8]!==l?(o=l===void 0?[]:l,e[8]=l,e[9]=o):o=e[9];const r=o;let p;e[10]!==d?(p=d===void 0?[]:d,e[10]=d,e[11]=p):p=e[11];const S=p;let D;e[12]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs(Qe,{className:"text-left",children:[t.jsx(Xe,{children:"Update Data Air Bersih"}),t.jsx(Ze,{children:"Perbarui data jenis data dan simpan perubahan."})]}),e[12]=D):D=e[12];let _;e[13]!==i?(_=()=>i.onOpenChange?.(!1),e[13]=i,e[14]=_):_=e[14];let f;e[15]!==n||e[16]!==r||e[17]!==h||e[18]!==S||e[19]!==_?(f=t.jsxs(et,{className:"flex flex-col gap-6 sm:max-w-md",children:[D,t.jsx(Be,{initialData:n,pulauOptions:h,jenisDataOptions:r,statusOptions:S,method:"put",submitRoute:"/kelola-data/air",onSuccess:_})]}),e[15]=n,e[16]=r,e[17]=h,e[18]=S,e[19]=_,e[20]=f):f=e[20];let x;return e[21]!==i||e[22]!==f?(x=t.jsx(qe,{...i,children:f}),e[21]=i,e[22]=f,e[23]=x):x=e[23],x}const Ot=(a,e,n)=>[{id:"select",header:({table:s})=>t.jsx(Ie,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>s.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:s})=>t.jsx(Ie,{checked:s.getIsSelected(),onCheckedChange:l=>s.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorFn:s=>s.pulau?.nama??"-",header:"Pulau"},{accessorFn:s=>s.jenis_data?.nama??"-",header:"Jenis Data"},{accessorKey:"tahun",header:"Tahun"},{accessorKey:"dokumen_nama",header:"Nama Dokumen",cell:({row:s})=>t.jsx("div",{className:"max-w-52 whitespace-normal break-words",children:s.getValue("dokumen_nama")})},{accessorKey:"status",header:"Status",cell:({row:s})=>t.jsx(St,{status:s.original?.status})},{id:"actions",cell:({row:s})=>{const[l,d]=ie.useState(!1),[m,h]=ie.useState(!1),[o,r]=ie.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(_t,{open:l,onOpenChange:d,nama:s.original?.dokumen_nama,path:s.original?.dokumen_path}),t.jsx(yt,{open:m,onOpenChange:h,pulauOptions:a,jenisDataOptions:e,statusOptions:n,data:s.original}),t.jsx(Dt,{open:o,onOpenChange:r,items:s.original.id,url:"/kelola-data/air",label:s.original.dokumen_nama||"Data Air",onSuccess:()=>s.toggleSelected(!1),showTrigger:!1}),t.jsxs(tt,{children:[t.jsx(at,{asChild:!0,children:t.jsxs(te,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"Open Menu"}),t.jsx($e,{className:"h-4 w-4"})]})}),t.jsxs(st,{align:"end",children:[t.jsx(lt,{children:"Actions"}),t.jsx(it,{}),t.jsx(Te,{onClick:()=>{d(!0)},children:"Download"}),t.jsx(Te,{onClick:()=>{h(!0)},children:"Edit"}),t.jsx(Te,{onClick:()=>{r(!0)},children:"Delete"})]})]})]})}}];function vt(a){const e=ne.c(10),{pulauOptions:n,jenisDataOptions:i,statusOptions:s}=a,[l,d]=ie.useState(!1);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(ut,{asChild:!0,children:t.jsxs(te,{variant:"outline",size:"sm",children:[t.jsx(ze,{className:"mr-2 h-4 w-4"})," Add Data Air Bersih"]})}),e[0]=m):m=e[0];let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsxs(mt,{children:[t.jsx(ht,{children:"Create Data Air Bersih"}),t.jsx(pt,{children:"Lengkapi data berikut untuk menambahkan data anggaran air baru."})]}),e[1]=h):h=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=()=>d(!1),e[2]=o):o=e[2];let r;e[3]!==i||e[4]!==n||e[5]!==s?(r=t.jsxs(ft,{children:[h,t.jsx(Be,{pulauOptions:n,jenisDataOptions:i,statusOptions:s,submitRoute:"/data-air",onSuccess:o})]}),e[3]=i,e[4]=n,e[5]=s,e[6]=r):r=e[6];let p;return e[7]!==l||e[8]!==r?(p=t.jsxs(xt,{open:l,onOpenChange:d,children:[m,r]}),e[7]=l,e[8]=r,e[9]=p):p=e[9],p}function At(a){const e=ne.c(4),{pulauOptions:n,jenisDataOptions:i,statusOptions:s}=a;let l;return e[0]!==i||e[1]!==n||e[2]!==s?(l=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(vt,{pulauOptions:n,jenisDataOptions:i,statusOptions:s})}),e[0]=i,e[1]=n,e[2]=s,e[3]=l):l=e[3],l}const wt=[{title:"Data Air Bersih",href:ot.index().url}];function Qt(){const a=ne.c(21),{data_air:e,pulauOptions:n,jenisDataOptions:i,statusOptions:s}=He().props;let l;a[0]!==e?(l=Array.isArray(e)?e:[],a[0]=e,a[1]=l):l=a[1];const d=l;let m;a[2]!==n?(m=Array.isArray(n)?n:[],a[2]=n,a[3]=m):m=a[3];const h=m;let o;a[4]!==i?(o=Array.isArray(i)?i:[],a[4]=i,a[5]=o):o=a[5];const r=o;let p;a[6]!==s?(p=Array.isArray(s)?s:[],a[6]=s,a[7]=p):p=a[7];const S=p;let D;a[8]!==i||a[9]!==n||a[10]!==s?(D=Ot(n,i,s),a[8]=i,a[9]=n,a[10]=s,a[11]=D):D=a[11];const _=D;let f;a[12]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(Ve,{title:"Data Air Bersih"}),a[12]=f):f=a[12];let x;a[13]!==r||a[14]!==h||a[15]!==S?(x=t.jsx(At,{pulauOptions:h,jenisDataOptions:r,statusOptions:S}),a[13]=r,a[14]=h,a[15]=S,a[16]=x):x=a[16];let b;return a[17]!==d||a[18]!==x||a[19]!==_?(b=t.jsxs(nt,{breadcrumbs:wt,children:[f,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsx(Je,{title:"Data Air Bersih",desc:"Data anggaran khusus kategori Air",columns:_,data:d,toolbar:x})})]}),a[17]=d,a[18]=x,a[19]=_,a[20]=b):b=a[20],b}export{Qt as default};
