import{c as ie,r as ne,d as Ve,j as t,u as Ye,H as $e}from"./app-hjCDtS7f.js";import{c as ze,S as ve,a as we,b as Ne,d as Ae,e as Te,L as Ie,f as Ee,E as Je,P as Ke,D as Be}from"./app-table-DEMotU8U.js";import{C as Re}from"./checkbox-BSapzMVW.js";import{c as Ge,B as te}from"./app-logo-icon-C15fRdAq.js";import{S as We,a as qe,b as Qe,c as Xe,d as Ze,e as et,f as tt,D as at,g as st,h as lt,i as nt,j as it,k as Fe,A as ot,p as rt}from"./app-layout-C4mYFOCx.js";import{I as ct}from"./input-Bpnb-2SH.js";import{L as se}from"./label-BndpfJXe.js";import{D as dt,a as ut,b as mt,c as ht,d as pt,e as ft,f as xt,g as jt}from"./dialog-C2kMVbHS.js";import{I as le}from"./input-error-B5BGTriX.js";import{u as gt,Y as _t,D as St,a as Dt}from"./download-dialog-CjVqrE3A.js";import{S as bt}from"./status-column-DhUrWlJJ.js";/* empty css            */import"./heading-small-C6H8P8AR.js";import"./index-B4CkvkQe.js";import"./index-ESxt-22C.js";import"./index-6Bmbv0Jk.js";import"./check-DwTt7AEl.js";import"./index-Bi1bFxLT.js";import"./loader-circle-B77yPPCx.js";import"./trash-CHgpwb7F.js";import"./badge-CgjGEe-3.js";function Le(a){const e=ie.c(117),{pulauOptions:i,jenisDataOptions:n,statusOptions:s,initialData:l,onSuccess:d,submitRoute:m,method:h}=a,o=h===void 0?"post":h,[r,p]=ne.useTransition(),D=l?.id_pulau??"",S=l?.id_jenis_data??"",_=l?.tahun??"",f=l?.dokumen_nama??"",x=l?.dokumen_path??"",b=l?.dokumen_url??"",Se=l?.status??"",De=o==="put"?"PUT":"POST";let oe;e[0]!==D||e[1]!==S||e[2]!==_||e[3]!==f||e[4]!==x||e[5]!==b||e[6]!==Se||e[7]!==De?(oe={id_pulau:D,id_jenis_data:S,tahun:_,dokumen_nama:f,dokumen_path:x,dokumen_url:b,dokumen:void 0,status:Se,_method:De},e[0]=D,e[1]=S,e[2]=_,e[3]=f,e[4]=x,e[5]=b,e[6]=Se,e[7]=De,e[8]=oe):oe=e[8];const{data:u,setData:be,errors:c,reset:ke,setError:Ce}=Ve(oe);let re;e[9]!==c||e[10]!==be||e[11]!==Ce?(re=(g,ae)=>{be(g,ae),c[g]&&Ce(g,"")},e[9]=c,e[10]=be,e[11]=Ce,e[12]=re):re=e[12];const j=re;let ce;e[13]!==u||e[14]!==l||e[15]!==o||e[16]!==d||e[17]!==ke||e[18]!==m?(ce=g=>{g.preventDefault(),p(()=>{const ae=new FormData;Object.entries(u).forEach(Ue=>{const[He,Pe]=Ue;Pe!=null&&ae.append(He,Pe)}),o==="put"&&l?.id?gt({url:m,id:l.id,data:ae,label:"Data Pantai",onSuccess:()=>{d?.()}}):ze({url:"/kelola-data/pantai",data:ae,label:"Data Pantai",onSuccess:()=>{ke(),d?.()}})})},e[13]=u,e[14]=l,e[15]=o,e[16]=d,e[17]=ke,e[18]=m,e[19]=ce):ce=e[19];const ye=ce,Oe=o==="put"&&"px-4";let k;e[20]!==Oe?(k=Ge("flex flex-col gap-4",Oe),e[20]=Oe,e[21]=k):k=e[21];let de;e[22]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(se,{children:"Nama Pulau"}),e[22]=de):de=e[22];let C;e[23]!==u.id_pulau?(C=u.id_pulau?.toString()??"",e[23]=u.id_pulau,e[24]=C):C=e[24];let y;e[25]!==j?(y=g=>j("id_pulau",Number(g)),e[25]=j,e[26]=y):y=e[26];let ue;e[27]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(ve,{children:t.jsx(we,{placeholder:"-- Pilih pulau --"})}),e[27]=ue):ue=e[27];let O;e[28]!==i?(O=i.map(yt),e[28]=i,e[29]=O):O=e[29];let P;e[30]!==O?(P=t.jsx(Ne,{children:t.jsx(Ae,{children:O})}),e[30]=O,e[31]=P):P=e[31];let v;e[32]!==C||e[33]!==y||e[34]!==P?(v=t.jsxs(Te,{value:C,onValueChange:y,children:[ue,P]}),e[32]=C,e[33]=y,e[34]=P,e[35]=v):v=e[35];let w;e[36]!==c.id_pulau?(w=c.id_pulau&&t.jsx(le,{message:c.id_pulau}),e[36]=c.id_pulau,e[37]=w):w=e[37];let N;e[38]!==v||e[39]!==w?(N=t.jsxs("div",{children:[de,v,w]}),e[38]=v,e[39]=w,e[40]=N):N=e[40];let me;e[41]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(se,{children:"Jenis Data"}),e[41]=me):me=e[41];let A;e[42]!==u.id_jenis_data?(A=u.id_jenis_data?.toString()??"",e[42]=u.id_jenis_data,e[43]=A):A=e[43];let T;e[44]!==j?(T=g=>j("id_jenis_data",Number(g)),e[44]=j,e[45]=T):T=e[45];let he;e[46]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ve,{children:t.jsx(we,{placeholder:"-- Pilih jenis data --"})}),e[46]=he):he=e[46];let F;e[47]!==n?(F=n.map(Ct),e[47]=n,e[48]=F):F=e[48];let E;e[49]!==F?(E=t.jsx(Ne,{children:t.jsx(Ae,{children:F})}),e[49]=F,e[50]=E):E=e[50];let I;e[51]!==A||e[52]!==T||e[53]!==E?(I=t.jsxs(Te,{value:A,onValueChange:T,children:[he,E]}),e[51]=A,e[52]=T,e[53]=E,e[54]=I):I=e[54];let R;e[55]!==c.id_jenis_data?(R=c.id_jenis_data&&t.jsx(le,{message:c.id_jenis_data}),e[55]=c.id_jenis_data,e[56]=R):R=e[56];let L;e[57]!==I||e[58]!==R?(L=t.jsxs("div",{children:[me,I,R]}),e[57]=I,e[58]=R,e[59]=L):L=e[59];let pe;e[60]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(se,{children:"Tahun"}),e[60]=pe):pe=e[60];const Me=u.tahun;let M;e[61]!==j?(M=g=>j("tahun",g),e[61]=j,e[62]=M):M=e[62];let fe;e[63]===Symbol.for("react.memo_cache_sentinel")?(fe=new Date().getFullYear(),e[63]=fe):fe=e[63];let U;e[64]!==u.tahun||e[65]!==M?(U=t.jsx(_t,{value:Me,onChange:M,placeholder:"Pilih tahun",minYear:1950,maxYear:fe}),e[64]=u.tahun,e[65]=M,e[66]=U):U=e[66];let H;e[67]!==c.tahun?(H=c.tahun&&t.jsx(le,{message:c.tahun}),e[67]=c.tahun,e[68]=H):H=e[68];let V;e[69]!==U||e[70]!==H?(V=t.jsxs("div",{className:"flex flex-col gap-2",children:[pe,U,H]}),e[69]=U,e[70]=H,e[71]=V):V=e[71];let xe;e[72]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(se,{children:"Upload Dokumen"}),e[72]=xe):xe=e[72];let Y;e[73]!==j?(Y=t.jsx(ct,{type:"file",onChange:g=>j("dokumen",g.target.files?.[0])}),e[73]=j,e[74]=Y):Y=e[74];let $;e[75]!==c.dokumen?($=c.dokumen&&t.jsx(le,{message:c.dokumen}),e[75]=c.dokumen,e[76]=$):$=e[76];let z;e[77]!==u.dokumen_nama||e[78]!==u.dokumen_url?(z=u.dokumen_url?t.jsxs("div",{className:"text-sm text-gray-600",children:["Current file:"," ",t.jsx("a",{href:u.dokumen_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:u.dokumen_nama.split("/").pop()})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No file uploaded yet"}),e[77]=u.dokumen_nama,e[78]=u.dokumen_url,e[79]=z):z=e[79];let J;e[80]!==Y||e[81]!==$||e[82]!==z?(J=t.jsxs("div",{children:[xe,Y,$,z]}),e[80]=Y,e[81]=$,e[82]=z,e[83]=J):J=e[83];let je;e[84]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(se,{children:"Status"}),e[84]=je):je=e[84];let K;e[85]!==u.status?(K=u.status?.toString()??"",e[85]=u.status,e[86]=K):K=e[86];let B;e[87]!==j?(B=g=>j("status",Number(g)),e[87]=j,e[88]=B):B=e[88];let ge;e[89]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(ve,{children:t.jsx(we,{placeholder:"-- Pilih status --"})}),e[89]=ge):ge=e[89];let G;e[90]!==s?(G=s.map(kt),e[90]=s,e[91]=G):G=e[91];let W;e[92]!==G?(W=t.jsx(Ne,{children:t.jsx(Ae,{children:G})}),e[92]=G,e[93]=W):W=e[93];let q;e[94]!==K||e[95]!==B||e[96]!==W?(q=t.jsxs(Te,{value:K,onValueChange:B,children:[ge,W]}),e[94]=K,e[95]=B,e[96]=W,e[97]=q):q=e[97];let Q;e[98]!==c.status?(Q=c.status&&t.jsx(le,{message:c.status}),e[98]=c.status,e[99]=Q):Q=e[99];let X;e[100]!==q||e[101]!==Q?(X=t.jsxs("div",{children:[je,q,Q]}),e[100]=q,e[101]=Q,e[102]=X):X=e[102];let Z;e[103]!==k||e[104]!==N||e[105]!==L||e[106]!==V||e[107]!==J||e[108]!==X?(Z=t.jsxs("div",{className:k,children:[N,L,V,J,X]}),e[103]=k,e[104]=N,e[105]=L,e[106]=V,e[107]=J,e[108]=X,e[109]=Z):Z=e[109];let ee;e[110]!==r||e[111]!==o?(ee=o==="post"?t.jsxs(dt,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(ut,{asChild:!0,children:t.jsx(te,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(te,{disabled:r,children:[r&&t.jsx(Ie,{className:"mr-1.5 size-4 animate-spin"}),"Create"]})]}):t.jsxs(We,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(qe,{asChild:!0,children:t.jsx(te,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(te,{disabled:r,children:[r&&t.jsx(Ie,{className:"mr-1.5 size-4 animate-spin"}),"Save"]})]}),e[110]=r,e[111]=o,e[112]=ee):ee=e[112];let _e;return e[113]!==ye||e[114]!==Z||e[115]!==ee?(_e=t.jsxs("form",{onSubmit:ye,className:"flex flex-col gap-4",children:[Z,ee]}),e[113]=ye,e[114]=Z,e[115]=ee,e[116]=_e):_e=e[116],_e}function kt(a){return t.jsx(Ee,{value:a.id.toString(),children:a.nama},a.id)}function Ct(a){return t.jsx(Ee,{value:a.id.toString(),children:a.nama},a.id)}function yt(a){return t.jsx(Ee,{value:a.id.toString(),children:a.nama},a.id)}function Ot(a){const e=ie.c(24);let i,n,s,l,d;e[0]!==a?({data:i,pulauOptions:s,jenisDataOptions:l,statusOptions:d,...n}=a,e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=l,e[5]=d):(i=e[1],n=e[2],s=e[3],l=e[4],d=e[5]);let m;e[6]!==s?(m=s===void 0?[]:s,e[6]=s,e[7]=m):m=e[7];const h=m;let o;e[8]!==l?(o=l===void 0?[]:l,e[8]=l,e[9]=o):o=e[9];const r=o;let p;e[10]!==d?(p=d===void 0?[]:d,e[10]=d,e[11]=p):p=e[11];const D=p;let S;e[12]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs(Xe,{className:"text-left",children:[t.jsx(Ze,{children:"Update Data Pantai"}),t.jsx(et,{children:"Perbarui data jenis data dan simpan perubahan."})]}),e[12]=S):S=e[12];let _;e[13]!==n?(_=()=>n.onOpenChange?.(!1),e[13]=n,e[14]=_):_=e[14];let f;e[15]!==i||e[16]!==r||e[17]!==h||e[18]!==D||e[19]!==_?(f=t.jsxs(tt,{className:"flex flex-col gap-6 sm:max-w-md",children:[S,t.jsx(Le,{initialData:i,pulauOptions:h,jenisDataOptions:r,statusOptions:D,method:"put",submitRoute:"/kelola-data/pantai",onSuccess:_})]}),e[15]=i,e[16]=r,e[17]=h,e[18]=D,e[19]=_,e[20]=f):f=e[20];let x;return e[21]!==n||e[22]!==f?(x=t.jsx(Qe,{...n,children:f}),e[21]=n,e[22]=f,e[23]=x):x=e[23],x}const Pt=(a,e,i)=>[{id:"select",header:({table:s})=>t.jsx(Re,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>s.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:s})=>t.jsx(Re,{checked:s.getIsSelected(),onCheckedChange:l=>s.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorFn:s=>s.pulau?.nama??"-",header:"Pulau"},{accessorFn:s=>s.jenis_data?.nama??"-",header:"Jenis Data"},{accessorKey:"tahun",header:"Tahun"},{accessorKey:"dokumen_nama",header:"Nama Dokumen",cell:({row:s})=>t.jsx("div",{className:"max-w-52 whitespace-normal break-words",children:s.getValue("dokumen_nama")})},{accessorKey:"status",header:"Status",cell:({row:s})=>t.jsx(bt,{status:s.original?.status})},{id:"actions",cell:({row:s})=>{const[l,d]=ne.useState(!1),[m,h]=ne.useState(!1),[o,r]=ne.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(St,{open:l,onOpenChange:d,nama:s.original?.dokumen_nama,path:s.original?.dokumen_path}),t.jsx(Ot,{open:m,onOpenChange:h,pulauOptions:a,jenisDataOptions:e,statusOptions:i,data:s.original}),t.jsx(Dt,{open:o,onOpenChange:r,items:s.original.id,url:"/kelola-data/pantai",label:s.original.dokumen_nama||"Data Pantai",onSuccess:()=>s.toggleSelected(!1),showTrigger:!1}),t.jsxs(at,{children:[t.jsx(st,{asChild:!0,children:t.jsxs(te,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"Open Menu"}),t.jsx(Je,{className:"h-4 w-4"})]})}),t.jsxs(lt,{align:"end",children:[t.jsx(nt,{children:"Actions"}),t.jsx(it,{}),t.jsx(Fe,{onClick:()=>{d(!0)},children:"Download"}),t.jsx(Fe,{onClick:()=>{h(!0)},children:"Edit"}),t.jsx(Fe,{onClick:()=>{r(!0)},children:"Delete"})]})]})]})}}];function vt(a){const e=ie.c(10),{pulauOptions:i,jenisDataOptions:n,statusOptions:s}=a,[l,d]=ne.useState(!1);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(mt,{asChild:!0,children:t.jsxs(te,{variant:"outline",size:"sm",children:[t.jsx(Ke,{className:"mr-2 h-4 w-4"})," Add Data Pantai"]})}),e[0]=m):m=e[0];let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsxs(ht,{children:[t.jsx(pt,{children:"Create Data Pantai"}),t.jsx(ft,{children:"Lengkapi data berikut untuk menambahkan data anggaran pantai baru."})]}),e[1]=h):h=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=()=>d(!1),e[2]=o):o=e[2];let r;e[3]!==n||e[4]!==i||e[5]!==s?(r=t.jsxs(xt,{children:[h,t.jsx(Le,{pulauOptions:i,jenisDataOptions:n,statusOptions:s,submitRoute:"/data-pantai",onSuccess:o})]}),e[3]=n,e[4]=i,e[5]=s,e[6]=r):r=e[6];let p;return e[7]!==l||e[8]!==r?(p=t.jsxs(jt,{open:l,onOpenChange:d,children:[m,r]}),e[7]=l,e[8]=r,e[9]=p):p=e[9],p}function wt(a){const e=ie.c(4),{pulauOptions:i,jenisDataOptions:n,statusOptions:s}=a;let l;return e[0]!==n||e[1]!==i||e[2]!==s?(l=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(vt,{pulauOptions:i,jenisDataOptions:n,statusOptions:s})}),e[0]=n,e[1]=i,e[2]=s,e[3]=l):l=e[3],l}const Nt=[{title:"Data Pantai",href:rt.index().url}];function Xt(){const a=ie.c(21),{data_pantai:e,pulauOptions:i,jenisDataOptions:n,statusOptions:s}=Ye().props;let l;a[0]!==n||a[1]!==i||a[2]!==s?(l=Pt(i,n,s),a[0]=n,a[1]=i,a[2]=s,a[3]=l):l=a[3];const d=l;let m;a[4]!==e?(m=Array.isArray(e)?e:[],a[4]=e,a[5]=m):m=a[5];const h=m;let o;a[6]!==i?(o=Array.isArray(i)?i:[],a[6]=i,a[7]=o):o=a[7];const r=o;let p;a[8]!==n?(p=Array.isArray(n)?n:[],a[8]=n,a[9]=p):p=a[9];const D=p;let S;a[10]!==s?(S=Array.isArray(s)?s:[],a[10]=s,a[11]=S):S=a[11];const _=S;let f;a[12]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx($e,{title:"Data Pantai"}),a[12]=f):f=a[12];let x;a[13]!==D||a[14]!==r||a[15]!==_?(x=t.jsx(wt,{pulauOptions:r,jenisDataOptions:D,statusOptions:_}),a[13]=D,a[14]=r,a[15]=_,a[16]=x):x=a[16];let b;return a[17]!==h||a[18]!==x||a[19]!==d?(b=t.jsxs(ot,{breadcrumbs:Nt,children:[f,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsx(Be,{title:"Data Pantai",desc:"Data anggaran khusus kategori pantai",columns:d,data:h,toolbar:x})})]}),a[17]=h,a[18]=x,a[19]=d,a[20]=b):b=a[20],b}export{Xt as default};
