import{c as ne,r as ie,d as qe,j as t,b as Ee,u as Qe,H as Xe}from"./app-H2_hPrbO.js";import{c as Ze,S as Oe,a as Ne,b as Te,d as we,e as Pe,L as $e,f as Fe,E as et,P as tt,D as st}from"./app-table--FZVUpOt.js";import{C as Ie}from"./checkbox-DKvUQgHQ.js";import{c as at,B as C}from"./app-logo-icon-BVhYzSJE.js";import{S as lt,a as it,b as nt,c as rt,d as ot,e as ct,f as dt,t as be,D as ut,g as mt,h as ht,i as ft,j as pt,k as Be,A as xt,l as jt}from"./app-layout-By7tMKoS.js";import{I as gt}from"./input-C98Myd8l.js";import{L as oe}from"./label-DuR9ZMGl.js";import{D as Re,a as Le,b as Me,c as ze,d as Ue,e as He,f as Ye,g as Ve}from"./dialog-DX_JWsBT.js";import{I as ce}from"./input-error-BNnyxIyr.js";import{u as _t,Y as St,D as Dt}from"./download-dialog-DnOi2Gol.js";import{T as bt}from"./trash-1Ohq22Vx.js";import{S as kt}from"./status-column-DFyj7VLP.js";/* empty css            */import"./heading-small-Bhm4m0j6.js";import"./index-DzDx4w4H.js";import"./index-DqEqxe7j.js";import"./index-BZRURolV.js";import"./check-BG-_DRqk.js";import"./index-Bi1bFxLT.js";import"./loader-circle-Dqty9hd8.js";import"./badge-CAdsO8uq.js";function Je(s){const e=ne.c(116),{pulauOptions:i,jenisDataOptions:n,statusOptions:a,initialData:l,onSuccess:o,submitRoute:c,method:m}=s,u=m===void 0?"post":m,[d,j]=ie.useTransition(),_=l?.id_pulau??"",g=l?.id_jenis_data??"",p=l?.tahun??"",x=l?.dokumen_nama??"",f=l?.dokumen_path??"",b=l?.dokumen_url??"",y=l?.status??"";let k;e[0]!==_||e[1]!==g||e[2]!==p||e[3]!==x||e[4]!==f||e[5]!==b||e[6]!==y?(k={id_pulau:_,id_jenis_data:g,tahun:p,dokumen_nama:x,dokumen_path:f,dokumen_url:b,dokumen:void 0,status:y,_method:"PUT"},e[0]=_,e[1]=g,e[2]=p,e[3]=x,e[4]=f,e[5]=b,e[6]=y,e[7]=k):k=e[7];const{data:r,setData:v,errors:h,reset:ke,setError:ye}=qe(k);let de;e[8]!==h||e[9]!==v||e[10]!==ye?(de=(D,re)=>{v(D,re),h[D]&&ye(D,"")},e[8]=h,e[9]=v,e[10]=ye,e[11]=de):de=e[11];const S=de;let ue;e[12]!==r||e[13]!==l||e[14]!==u||e[15]!==o||e[16]!==ke||e[17]!==c?(ue=D=>{D.preventDefault(),j(()=>{const re=new FormData;Object.entries(r).forEach(Ge=>{const[We,Ae]=Ge;Ae!=null&&re.append(We,Ae)}),u==="put"&&l?.id?_t({url:c,id:l.id,data:re,label:"Data Air",onSuccess:o}):Ze({url:"/kelola-data/air",data:re,label:"Data Air",onSuccess:()=>{ke(),o?.()}})})},e[12]=r,e[13]=l,e[14]=u,e[15]=o,e[16]=ke,e[17]=c,e[18]=ue):ue=e[18];const Ce=ue,ve=u==="put"&&"px-4";let A;e[19]!==ve?(A=at("flex flex-col gap-4",ve),e[19]=ve,e[20]=A):A=e[20];let me;e[21]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(oe,{children:"Nama Pulau"}),e[21]=me):me=e[21];let O;e[22]!==r.id_pulau?(O=r.id_pulau?.toString()??"",e[22]=r.id_pulau,e[23]=O):O=e[23];let N;e[24]!==S?(N=D=>S("id_pulau",Number(D)),e[24]=S,e[25]=N):N=e[25];let he;e[26]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Oe,{children:t.jsx(Ne,{placeholder:"-- Pilih pulau --"})}),e[26]=he):he=e[26];let T;e[27]!==i?(T=i.map(vt),e[27]=i,e[28]=T):T=e[28];let w;e[29]!==T?(w=t.jsx(Te,{children:t.jsx(we,{children:T})}),e[29]=T,e[30]=w):w=e[30];let P;e[31]!==O||e[32]!==N||e[33]!==w?(P=t.jsxs(Pe,{value:O,onValueChange:N,children:[he,w]}),e[31]=O,e[32]=N,e[33]=w,e[34]=P):P=e[34];let $;e[35]!==h.id_pulau?($=h.id_pulau&&t.jsx(ce,{message:h.id_pulau}),e[35]=h.id_pulau,e[36]=$):$=e[36];let F;e[37]!==P||e[38]!==$?(F=t.jsxs("div",{children:[me,P,$]}),e[37]=P,e[38]=$,e[39]=F):F=e[39];let fe;e[40]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(oe,{children:"Jenis Data"}),e[40]=fe):fe=e[40];let E;e[41]!==r.id_jenis_data?(E=r.id_jenis_data?.toString()??"",e[41]=r.id_jenis_data,e[42]=E):E=e[42];let I;e[43]!==S?(I=D=>S("id_jenis_data",Number(D)),e[43]=S,e[44]=I):I=e[44];let pe;e[45]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Oe,{children:t.jsx(Ne,{placeholder:"-- Pilih jenis data --"})}),e[45]=pe):pe=e[45];let B;e[46]!==n?(B=n.map(Ct),e[46]=n,e[47]=B):B=e[47];let R;e[48]!==B?(R=t.jsx(Te,{children:t.jsx(we,{children:B})}),e[48]=B,e[49]=R):R=e[49];let L;e[50]!==E||e[51]!==I||e[52]!==R?(L=t.jsxs(Pe,{value:E,onValueChange:I,children:[pe,R]}),e[50]=E,e[51]=I,e[52]=R,e[53]=L):L=e[53];let M;e[54]!==h.id_jenis_data?(M=h.id_jenis_data&&t.jsx(ce,{message:h.id_jenis_data}),e[54]=h.id_jenis_data,e[55]=M):M=e[55];let z;e[56]!==L||e[57]!==M?(z=t.jsxs("div",{children:[fe,L,M]}),e[56]=L,e[57]=M,e[58]=z):z=e[58];let xe;e[59]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(oe,{children:"Tahun"}),e[59]=xe):xe=e[59];const Ke=r.tahun;let U;e[60]!==S?(U=D=>S("tahun",D),e[60]=S,e[61]=U):U=e[61];let je;e[62]===Symbol.for("react.memo_cache_sentinel")?(je=new Date().getFullYear(),e[62]=je):je=e[62];let H;e[63]!==r.tahun||e[64]!==U?(H=t.jsx(St,{value:Ke,onChange:U,placeholder:"Pilih tahun",minYear:1950,maxYear:je}),e[63]=r.tahun,e[64]=U,e[65]=H):H=e[65];let Y;e[66]!==h.tahun?(Y=h.tahun&&t.jsx(ce,{message:h.tahun}),e[66]=h.tahun,e[67]=Y):Y=e[67];let V;e[68]!==H||e[69]!==Y?(V=t.jsxs("div",{children:[xe,H,Y]}),e[68]=H,e[69]=Y,e[70]=V):V=e[70];let ge;e[71]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(oe,{children:"Upload Dokumen"}),e[71]=ge):ge=e[71];let J;e[72]!==S?(J=t.jsx(gt,{type:"file",onChange:D=>S("dokumen",D.target.files?.[0])}),e[72]=S,e[73]=J):J=e[73];let K;e[74]!==h.dokumen?(K=h.dokumen&&t.jsx(ce,{message:h.dokumen}),e[74]=h.dokumen,e[75]=K):K=e[75];let G;e[76]!==r.dokumen_nama||e[77]!==r.dokumen_url?(G=r.dokumen_url?t.jsxs("div",{className:"text-sm text-gray-600",children:["Current file:"," ",t.jsx("a",{href:r.dokumen_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r.dokumen_nama.split("/").pop()})]}):t.jsx("p",{className:"text-sm text-gray-500",children:"No file uploaded yet"}),e[76]=r.dokumen_nama,e[77]=r.dokumen_url,e[78]=G):G=e[78];let W;e[79]!==J||e[80]!==K||e[81]!==G?(W=t.jsxs("div",{children:[ge,J,K,G]}),e[79]=J,e[80]=K,e[81]=G,e[82]=W):W=e[82];let _e;e[83]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(oe,{children:"Status"}),e[83]=_e):_e=e[83];let q;e[84]!==r.status?(q=r.status?.toString()??"",e[84]=r.status,e[85]=q):q=e[85];let Q;e[86]!==S?(Q=D=>S("status",Number(D)),e[86]=S,e[87]=Q):Q=e[87];let Se;e[88]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(Oe,{children:t.jsx(Ne,{placeholder:"-- Pilih status --"})}),e[88]=Se):Se=e[88];let X;e[89]!==a?(X=a.map(yt),e[89]=a,e[90]=X):X=e[90];let Z;e[91]!==X?(Z=t.jsx(Te,{children:t.jsx(we,{children:X})}),e[91]=X,e[92]=Z):Z=e[92];let ee;e[93]!==q||e[94]!==Q||e[95]!==Z?(ee=t.jsxs(Pe,{value:q,onValueChange:Q,children:[Se,Z]}),e[93]=q,e[94]=Q,e[95]=Z,e[96]=ee):ee=e[96];let te;e[97]!==h.status?(te=h.status&&t.jsx(ce,{message:h.status}),e[97]=h.status,e[98]=te):te=e[98];let se;e[99]!==ee||e[100]!==te?(se=t.jsxs("div",{children:[_e,ee,te]}),e[99]=ee,e[100]=te,e[101]=se):se=e[101];let ae;e[102]!==A||e[103]!==F||e[104]!==z||e[105]!==V||e[106]!==W||e[107]!==se?(ae=t.jsxs("div",{className:A,children:[F,z,V,W,se]}),e[102]=A,e[103]=F,e[104]=z,e[105]=V,e[106]=W,e[107]=se,e[108]=ae):ae=e[108];let le;e[109]!==d||e[110]!==u?(le=u==="post"?t.jsxs(Re,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(Le,{asChild:!0,children:t.jsx(C,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(C,{disabled:d,children:[d&&t.jsx($e,{className:"mr-1.5 size-4 animate-spin"}),"Create"]})]}):t.jsxs(lt,{className:"gap-2 pt-2 sm:space-x-0",children:[t.jsx(it,{asChild:!0,children:t.jsx(C,{type:"button",variant:"outline",children:"Cancel"})}),t.jsxs(C,{disabled:d,children:[d&&t.jsx($e,{className:"mr-1.5 size-4 animate-spin"}),"Save"]})]}),e[109]=d,e[110]=u,e[111]=le):le=e[111];let De;return e[112]!==Ce||e[113]!==ae||e[114]!==le?(De=t.jsxs("form",{onSubmit:Ce,className:"flex flex-col gap-4",children:[ae,le]}),e[112]=Ce,e[113]=ae,e[114]=le,e[115]=De):De=e[115],De}function yt(s){return t.jsx(Fe,{value:s.id.toString(),children:s.nama},s.id)}function Ct(s){return t.jsx(Fe,{value:s.id.toString(),children:s.nama},s.id)}function vt(s){return t.jsx(Fe,{value:s.id.toString(),children:s.nama},s.id)}function At(s){const e=ne.c(24);let i,n,a,l,o;e[0]!==s?({data:i,pulauOptions:a,jenisDataOptions:l,statusOptions:o,...n}=s,e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=o):(i=e[1],n=e[2],a=e[3],l=e[4],o=e[5]);let c;e[6]!==a?(c=a===void 0?[]:a,e[6]=a,e[7]=c):c=e[7];const m=c;let u;e[8]!==l?(u=l===void 0?[]:l,e[8]=l,e[9]=u):u=e[9];const d=u;let j;e[10]!==o?(j=o===void 0?[]:o,e[10]=o,e[11]=j):j=e[11];const _=j;let g;e[12]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsxs(rt,{className:"text-left",children:[t.jsx(ot,{children:"Update Data Air Bersih"}),t.jsx(ct,{children:"Perbarui data jenis data dan simpan perubahan."})]}),e[12]=g):g=e[12];let p;e[13]!==n?(p=()=>n.onOpenChange?.(!1),e[13]=n,e[14]=p):p=e[14];let x;e[15]!==i||e[16]!==d||e[17]!==m||e[18]!==_||e[19]!==p?(x=t.jsxs(dt,{className:"flex flex-col gap-6 sm:max-w-md",children:[g,t.jsx(Je,{initialData:i,pulauOptions:m,jenisDataOptions:d,statusOptions:_,method:"put",submitRoute:"/kelola-data/air",onSuccess:p})]}),e[15]=i,e[16]=d,e[17]=m,e[18]=_,e[19]=p,e[20]=x):x=e[20];let f;return e[21]!==n||e[22]!==x?(f=t.jsx(nt,{...n,children:x}),e[21]=n,e[22]=x,e[23]=f):f=e[23],f}function Ot(s){const e=ne.c(32);let i,n,a,l,o,c;e[0]!==s?({data:i,url:c,label:l,onSuccess:n,showTrigger:o,...a}=s,e[0]=s,e[1]=i,e[2]=n,e[3]=a,e[4]=l,e[5]=o,e[6]=c):(i=e[1],n=e[2],a=e[3],l=e[4],o=e[5],c=e[6]);const m=l===void 0?"item":l,u=o===void 0?!0:o,[d,j]=ie.useTransition();ie.useState(!1);let _;e[7]!==i||e[8]!==m||e[9]!==n||e[10]!==a||e[11]!==c?(_=()=>{j(()=>{Array.isArray(i)?Ee.delete(c,{data:{ids:i},onSuccess:()=>{be.success(`${i.length} ${m??"item"} deleted successfully`),a.onOpenChange?.(!1),n?.()},onError:Tt}):Ee.delete(`${c}/${i}`,{onSuccess:()=>{be.success(`${m??"Item"} deleted successfully`),a.onOpenChange?.(!1),n?.()},onError:Nt})})},e[7]=i,e[8]=m,e[9]=n,e[10]=a,e[11]=c,e[12]=_):_=e[12];const g=_;let p;e[13]!==u?(p=u&&t.jsx(ze,{asChild:!0,children:t.jsxs(C,{variant:"outline",size:"sm",children:[t.jsx(bt,{className:"mr-2 size-4","aria-hidden":"true"}),"Delete"]})}),e[13]=u,e[14]=p):p=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(Ue,{children:"Are you absolutely sure?"}),e[15]=x):x=e[15];let f;e[16]!==m?(f=t.jsxs(He,{children:[x,t.jsxs(Ye,{children:["This action cannot be undone. This will permanently delete"," ",t.jsx("span",{className:"font-medium",children:m})," from our servers."]})]}),e[16]=m,e[17]=f):f=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(Le,{asChild:!0,children:t.jsx(C,{variant:"outline",children:"Cancel"})}),e[18]=b):b=e[18];let y;e[19]!==d?(y=d&&t.jsx($e,{className:"mr-1.5 size-4 animate-spin","aria-hidden":"true"}),e[19]=d,e[20]=y):y=e[20];let k;e[21]!==g||e[22]!==d||e[23]!==y?(k=t.jsxs(Re,{className:"gap-2 sm:space-x-0",children:[b,t.jsxs(C,{variant:"destructive",onClick:g,disabled:d,children:[y,"Delete"]})]}),e[21]=g,e[22]=d,e[23]=y,e[24]=k):k=e[24];let r;e[25]!==f||e[26]!==k?(r=t.jsxs(Ve,{children:[f,k]}),e[25]=f,e[26]=k,e[27]=r):r=e[27];let v;return e[28]!==a||e[29]!==r||e[30]!==p?(v=t.jsxs(Me,{...a,children:[p,r]}),e[28]=a,e[29]=r,e[30]=p,e[31]=v):v=e[31],v}function Nt(){return be.error("Failed to delete")}function Tt(){return be.error("Failed to delete")}const wt=(s,e,i)=>[{id:"select",header:({table:a})=>t.jsx(Ie,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all"}),cell:({row:a})=>t.jsx(Ie,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorFn:a=>a.pulau?.nama??"-",header:"Pulau"},{accessorFn:a=>a.jenis_data?.nama??"-",header:"Jenis Data"},{accessorKey:"tahun",header:"Tahun"},{accessorKey:"dokumen_nama",header:"Nama Dokumen",cell:({row:a})=>t.jsx(Dt,{nama:a.original?.dokumen_nama,path:a.original?.dokumen_path})},{accessorKey:"status",header:"Status",cell:({row:a})=>t.jsx(kt,{status:a.original?.status})},{id:"actions",cell:({row:a})=>{const[l,o]=ie.useState(!1),[c,m]=ie.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(At,{open:l,onOpenChange:o,pulauOptions:s,jenisDataOptions:e,statusOptions:i,data:a.original}),t.jsx(Ot,{open:c,onOpenChange:m,data:a.original.id,url:"/data-air",label:a.original.dokumen_nama||"Data Air",onSuccess:()=>a.toggleSelected(!1),showTrigger:!1}),t.jsxs(ut,{children:[t.jsx(mt,{asChild:!0,children:t.jsxs(C,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"Open Menu"}),t.jsx(et,{className:"h-4 w-4"})]})}),t.jsxs(ht,{align:"end",children:[t.jsx(ft,{children:"Actions"}),t.jsx(pt,{}),t.jsx(Be,{onClick:()=>{o(!0)},children:"Edit"}),t.jsx(Be,{children:"Delete"})]})]})]})}}];function Pt(s){const e=ne.c(10),{pulauOptions:i,jenisDataOptions:n,statusOptions:a}=s,[l,o]=ie.useState(!1);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(ze,{asChild:!0,children:t.jsxs(C,{variant:"outline",size:"sm",children:[t.jsx(tt,{className:"mr-2 h-4 w-4"})," Add Data Air Bersih"]})}),e[0]=c):c=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(He,{children:[t.jsx(Ue,{children:"Create Data Air Bersih"}),t.jsx(Ye,{children:"Lengkapi data berikut untuk menambahkan data anggaran air baru."})]}),e[1]=m):m=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=()=>o(!1),e[2]=u):u=e[2];let d;e[3]!==n||e[4]!==i||e[5]!==a?(d=t.jsxs(Ve,{children:[m,t.jsx(Je,{pulauOptions:i,jenisDataOptions:n,statusOptions:a,submitRoute:"/data-air",onSuccess:u})]}),e[3]=n,e[4]=i,e[5]=a,e[6]=d):d=e[6];let j;return e[7]!==l||e[8]!==d?(j=t.jsxs(Me,{open:l,onOpenChange:o,children:[c,d]}),e[7]=l,e[8]=d,e[9]=j):j=e[9],j}function $t(s){const e=ne.c(4),{pulauOptions:i,jenisDataOptions:n,statusOptions:a}=s;let l;return e[0]!==n||e[1]!==i||e[2]!==a?(l=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Pt,{pulauOptions:i,jenisDataOptions:n,statusOptions:a})}),e[0]=n,e[1]=i,e[2]=a,e[3]=l):l=e[3],l}const Ft=[{title:"Data Air Bersih",href:jt.index().url}];function ss(){const s=ne.c(21),{data_air:e,pulauOptions:i,jenisDataOptions:n,statusOptions:a}=Qe().props;let l;s[0]!==e?(l=Array.isArray(e)?e:[],s[0]=e,s[1]=l):l=s[1];const o=l;let c;s[2]!==i?(c=Array.isArray(i)?i:[],s[2]=i,s[3]=c):c=s[3];const m=c;let u;s[4]!==n?(u=Array.isArray(n)?n:[],s[4]=n,s[5]=u):u=s[5];const d=u;let j;s[6]!==a?(j=Array.isArray(a)?a:[],s[6]=a,s[7]=j):j=s[7];const _=j;let g;s[8]!==n||s[9]!==i||s[10]!==a?(g=wt(i,n,a),s[8]=n,s[9]=i,s[10]=a,s[11]=g):g=s[11];const p=g;let x;s[12]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(Xe,{title:"Data Air Bersih"}),s[12]=x):x=s[12];let f;s[13]!==d||s[14]!==m||s[15]!==_?(f=t.jsx($t,{pulauOptions:m,jenisDataOptions:d,statusOptions:_}),s[13]=d,s[14]=m,s[15]=_,s[16]=f):f=s[16];let b;return s[17]!==o||s[18]!==f||s[19]!==p?(b=t.jsxs(xt,{breadcrumbs:Ft,children:[x,t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:t.jsx(st,{title:"Data Air Bersih",desc:"Data anggaran khusus kategori Air",columns:p,data:o,toolbar:f})})]}),s[17]=o,s[18]=f,s[19]=p,s[20]=b):b=s[20],b}export{ss as default};
